<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>Login</title>
</head>
<body>

<h2>Login to Fake Account Detector</h2>
<button id="login">Login with Google</button>

<!-- Firebase SDK -->
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-auth-compat.js"></script>

<script>
  // ðŸ”¹ Firebase config
  firebase.initializeApp({
    apiKey: "AIzaSyDMQLzZD8978J-ENipP4wmZhywn9ZxHD7w",
    authDomain: "yt-fake-detector.firebaseapp.com",
    projectId: "yt-fake-detector"
  });

  const auth = firebase.auth();

  // ðŸ”¹ CHANGE THIS TO YOUR REAL EXTENSION ID
  const EXTENSION_ID = "PASTE_EXTENSION_ID_HERE";

  document.getElementById("login").addEventListener("click", async () => {
    try {
      const provider = new firebase.auth.GoogleAuthProvider();
      const result = await auth.signInWithPopup(provider);

      const user = {
        uid: result.user.uid,
        email: result.user.email,
        name: result.user.displayName
      };

      // ðŸ”¹ Send login data to extension
      chrome.runtime.sendMessage(
        EXTENSION_ID,
        { type: "LOGIN_SUCCESS", user },
        () => {
          // ðŸ”¹ Auto-close login tab
          window.close();
        }
      );

    } catch (err) {
      console.error("Login failed", err);
      alert("Login failed. Please try again.");
    }
  });
</script>

</body>
</html>
